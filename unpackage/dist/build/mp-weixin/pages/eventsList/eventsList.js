(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/eventsList/eventsList"],{"2f2d":function(t,a,e){"use strict";(function(t){e("1f75");i(e("66fd"));var a=i(e("c987"));function i(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,e("543d")["createPage"])},"326a":function(t,a,e){"use strict";var i={uniLoadMore:function(){return e.e("components/uni-load-more/uni-load-more").then(e.bind(null,"b7a9"))}},s=function(){var t=this,a=t.$createElement;t._self._c},n=[];e.d(a,"b",(function(){return s})),e.d(a,"c",(function(){return n})),e.d(a,"a",(function(){return i}))},"34bb":function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=function(){e.e("components/Activity").then(function(){return resolve(e("be53"))}.bind(null,e)).catch(e.oe)},s={components:{Activity:i},data:function(){var t=this.getDate({format:!0});return{tagIndex:0,filterList:["全部","价格","距离","时间","状态"],section3List:["全部","未开始","报名中","进行中","已结束"],disList:["全部项","周边","国内","国外"],disIndex:0,status:0,classList:[],fClass:[],fIndex:0,date1:t,date2:t,date3:t,date4:t,showDate1:!1,showDate2:!1,showDate3:!1,showDate4:!1,isPrice:0,state:0,typeId:0,distance:"",addressData:{},loadStatus:"noMore",focus:!1,filterType:-1,showMask:!1,pageNo:1,pageSize:5,hotActiveList:[]}},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},onLoad:function(a){var e=this;this.fIndex=a.fIndex,t.getStorage({key:"address",success:function(t){e.addressData=t.data},complete:function(){e.getCates()}})},onReachBottom:function(){"noMore"!=this.loadStatus&&this.getActivityList()},methods:{selTime:function(){this.closeMask(),this.sortByTime()},changeDisIndex:function(t){this.disIndex=t,this.distance=0==t?"":t,this.closeMask(),this.hotActiveList=[],this.pageNo=1,this.sortByDistance()},changeTagIndex:function(t){this.tagIndex=t,this.typeId=0==t?"":t,this.closeMask(),this.hotActiveList=[],this.pageNo=1,this.sortByTypeId()},selStatus:function(t){this.status=t,this.state=t,0==t&&(this.state=""),this.closeMask(),this.hotActiveList=[],this.pageNo=1,this.sortByState()},getCates:function(){var t=this;this.$api.get("/api/static/dictList",{params:{type:1}}).then((function(a){console.log(a.data),t.classList=a.data,t.fClass=a.data.map((function(t){return t.name}))}))},bindPickerChange:function(t){this.fIndex=t.target.value},goSearch:function(){t.navigateTo({url:"/pages/search/search"})},bindDateChange1:function(t){this.date1=t.target.value,this.showDate1=!0},bindDateChange2:function(t){this.date2=t.target.value,this.showDate2=!0},bindDateChange3:function(t){this.date3=t.target.value,this.showDate3=!0},bindDateChange4:function(t){this.date4=t.target.value,this.showDate4=!0},getDate:function(t){var a=new Date,e=a.getFullYear(),i=a.getMonth()+1,s=a.getDate();return"start"===t?e-=60:"end"===t&&(e+=2),i=i>9?i:"0"+i,s=s>9?s:"0"+s,"".concat(e,"-").concat(i,"-").concat(s)},sortByTime:function(){var t=this;this.loadStatus="loading",this.$api.get("/api/act/getActivityList",{params:{pageNo:this.pageNo,pageSize:this.pageSize,lat:this.addressData.lat,lng:this.addressData.lng,enStart:this.showDate1?this.date1+" 00:00:00":"",enEnd:this.showDate2?this.date1+" 00:00:00":"",acStart:this.showDate3?this.date1+" 00:00:00":"",acEnd:this.showDate4?this.date1+" 00:00:00":""}}).then((function(a){a.data.length>0?(t.hotActiveList=t.hotActiveList.concat(a.data),t.pageNo++,a.data.length==t.pageSize?t.loadStatus="more":t.loadStatus="noMore"):t.loadStatus="noMore"}))},sortByDistance:function(){var t=this;this.loadStatus="loading",this.$api.get("/api/act/getActivityList",{params:{pageNo:this.pageNo,pageSize:this.pageSize,lat:this.addressData.lat,lng:this.addressData.lng,distance:this.distance}}).then((function(a){a.data.length>0?(t.hotActiveList=t.hotActiveList.concat(a.data),t.pageNo++,a.data.length==t.pageSize?t.loadStatus="more":t.loadStatus="noMore"):t.loadStatus="noMore"}))},sortByState:function(){var t=this;this.loadStatus="loading",this.$api.get("/api/act/getActivityList",{params:{pageNo:this.pageNo,pageSize:this.pageSize,lat:this.addressData.lat,lng:this.addressData.lng,state:this.state}}).then((function(a){a.data.length>0?(t.hotActiveList=t.hotActiveList.concat(a.data),t.pageNo++,a.data.length==t.pageSize?t.loadStatus="more":t.loadStatus="noMore"):t.loadStatus="noMore"}))},sortByTypeId:function(){var t=this;this.loadStatus="loading",this.$api.get("/api/act/getActivityList",{params:{pageNo:this.pageNo,pageSize:this.pageSize,lat:this.addressData.lat,lng:this.addressData.lng,typeId:this.typeId}}).then((function(a){a.data.length>0?(t.hotActiveList=t.hotActiveList.concat(a.data),t.pageNo++,a.data.length==t.pageSize?t.loadStatus="more":t.loadStatus="noMore"):t.loadStatus="noMore"}))},sortByPrice:function(){var t=this;this.loadStatus="loading",this.$api.get("/api/act/getActivityList",{params:{pageNo:this.pageNo,pageSize:this.pageSize,lat:this.addressData.lat,lng:this.addressData.lng,isPrice:this.isPrice}}).then((function(a){a.data.length>0?(t.hotActiveList=t.hotActiveList.concat(a.data),t.pageNo++,a.data.length==t.pageSize?t.loadStatus="more":t.loadStatus="noMore"):t.loadStatus="noMore"}))},getActivityList:function(){var t=this;this.loadStatus="loading",this.$api.get("/api/act/getActivityList",{params:{pageNo:this.pageNo,pageSize:this.pageSize,lat:this.addressData.lat,lng:this.addressData.lng}}).then((function(a){console.log(a.data),a.data.forEach((function(a){a.poster=t.$baseUrl+a.poster})),a.data.length>0?(t.hotActiveList=t.hotActiveList.concat(a.data),t.pageNo++,a.data.length<t.pageSize?t.loadStatus="noMore":t.loadStatus="more"):t.loadStatus="noMore"}))},changeType:function(t){1!==t?(3==t&&(this.showDate1=!1,this.showDate2=!1,this.showDate3=!1,this.showDate4=!1),this.filterType=t,this.showMask=!0):(this.isPrice=0==this.isPrice?1:0,this.hotActiveList=[],this.pageNo=1,this.sortByPrice())},closeMask:function(){this.filterType=-1,this.showMask=!1}}};a.default=s}).call(this,e("543d")["default"])},"426c":function(t,a,e){"use strict";e.r(a);var i=e("34bb"),s=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(a,t,(function(){return i[t]}))}(n);a["default"]=s.a},a452:function(t,a,e){},c347:function(t,a,e){"use strict";var i=e("a452"),s=e.n(i);s.a},c987:function(t,a,e){"use strict";e.r(a);var i=e("326a"),s=e("426c");for(var n in s)"default"!==n&&function(t){e.d(a,t,(function(){return s[t]}))}(n);e("c347");var o,h=e("f0c5"),c=Object(h["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);a["default"]=c.exports}},[["2f2d","common/runtime","common/vendor"]]]);