(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"268e":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("e99b"));function a(t){return t&&t.__esModule?t:{default:t}}var o,s=function(){i.e("components/uni-load-more/uni-load-more").then(function(){return resolve(i("b7a9"))}.bind(null,i)).catch(i.oe)},c={},u=function(){i.e("components/Activity").then(function(){return resolve(i("be53"))}.bind(null,i)).catch(i.oe)},l=function(){i.e("components/TabBar").then(function(){return resolve(i("bf3b"))}.bind(null,i)).catch(i.oe)},r={components:{Activity:u,TabBar:l,uniLoadMore:s},data:function(){return{imgUrl:"",classList:[],hotActiveList:[],newActiveList:[],pageNo1:1,pageNo2:1,pageSize:5,loadStatus1:"noMore",loadStatus2:"noMore",loginStatus:1,addressData:{},top:30,height:32,right:0,currentIndex:0,titleIndex:0,showAddTip:!1,swiperList:[],jw:{}}},onLoad:function(){this.imgUrl=this.$baseUrl;var e=t.getMenuButtonBoundingClientRect();this.top=e.top,this.height=e.height,this.getAdvertList()},onShow:function(){var e=t.getStorageSync("token");this.loginStatus=e?1:0,this.titleIndex=0,this.newActiveList=[],this.loadStatus1="noMore",this.loadStatus2="noMore",this.pageNo1=1,this.pageNo2=1,this.hotActiveList=[],this.getLocal()},onReachBottom:function(){"noMore"!=this.loadStatus&&(0==this.titleIndex?this.getActivityList1():this.getActivityList2())},methods:{getLocal:function(){var e=this;o=new n.default({key:"SSOBZ-TXSWP-XUKD5-LBVOW-DH74K-5MBQ6"}),wx.getLocation({type:"wgs84",success:function(i){console.log(i),c.lat=i.latitude,c.lng=i.longitude,o.reverseGeocoder({location:{latitude:i.latitude,longitude:i.longitude},success:function(i){c.city=i.result.address_component.city+i.result.address_component.district,e.addressData=c,getApp().globalData.addressData=c;try{t.setStorageSync("address",c)}catch(n){}}})},complete:function(){e.getCates()}})},goMine:function(){t.reLaunch({url:"/pages/mine/mine"})},linkPage:function(t){1==t.linkType&&console.log(t.linkUrl)},getAdvertList:function(){var t=this;this.$api.get("/api/static/advertList",{params:{type:1}}).then((function(e){t.swiperList=e.data}))},getCates:function(){var t=this;this.$api.get("/api/static/dictList",{params:{type:1}}).then((function(e){console.log(e.data);var i=[];e.data.forEach((function(t){0==t.pid&&i.push(t)})),t.classList=i,t.getActivityList1()}))},getActivityList1:function(){var t=this;this.loadStatus="loading",this.$api.get("/api/act/getActivityList",{params:{pageNo:this.pageNo1,pageSize:this.pageSize,lat:this.addressData.lat||"",lng:this.addressData.lng||""}}).then((function(e){console.log(e.data),e.data.length>0?(t.hotActiveList=t.hotActiveList.concat(e.data),t.pageNo1++,e.data.length<t.pageSize?t.loadStatus1="noMore":t.loadStatus1="more"):t.loadStatus1="noMore"}))},getActivityList2:function(){var t=this;this.loadStatus="loading",this.$api.get("/api/act/getActivityList",{params:{pageNo:this.pageNo2,pageSize:this.pageSize,lat:this.addressData.lat,lng:this.addressData.lng,isNew:1}}).then((function(e){console.log(e.data),e.data.length>0?(t.newActiveList=t.newActiveList.concat(e.data),t.pageNo2++,e.data.length<t.pageSize?t.loadStatus2="noMore":t.loadStatus2="more"):t.loadStatus2="noMore"}))},closeTip:function(){this.showAddTip=!1},swiperChange:function(t){this.currentIndex=t.detail.current},changeTitle:function(t){t!=this.titleIndex&&(this.titleIndex=t,0==this.titleIndex&&this.hotActiveList.length<=0&&this.getActivityList1(),1==this.titleIndex&&this.newActiveList.length<=0&&this.getActivityList2())},goPosition:function(){t.navigateTo({url:"/pages/position/position"})},goSearch:function(){t.navigateTo({url:"/pages/search/search"})},goEventsList:function(e){t.navigateTo({url:"/pages/eventsList/eventsList?oneIndex="+e})},goDetail:function(e){getApp().globalData.activeData=e,console.log(getApp().globalData.activeData),t.navigateTo({url:"/pages/activityDetails/activityDetails"})},goMessage:function(){t.navigateTo({url:"/pagesA/news/news"})}}};e.default=r}).call(this,i("543d")["default"])},"4c43":function(t,e,i){},"6b8c":function(t,e,i){"use strict";var n={uniLoadMore:function(){return i.e("components/uni-load-more/uni-load-more").then(i.bind(null,"b7a9"))}},a=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"7d4a":function(t,e,i){"use strict";i.r(e);var n=i("268e"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"8cba":function(t,e,i){"use strict";(function(t){i("1f75");n(i("66fd"));var e=n(i("e045"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},e045:function(t,e,i){"use strict";i.r(e);var n=i("6b8c"),a=i("7d4a");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("e5cd");var s,c=i("f0c5"),u=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=u.exports},e5cd:function(t,e,i){"use strict";var n=i("4c43"),a=i.n(n);a.a}},[["8cba","common/runtime","common/vendor"]]]);