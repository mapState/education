(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/joinDetail/joinDetail"],{3843:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){a.e("components/Activity").then(function(){return resolve(a("be53"))}.bind(null,a)).catch(a.oe)},n={components:{Activity:i},data:function(){return{array:["女","男"],activeData:{},buyType:2,address:"",age:"",name:"",phone:"",sex:0,activityTeamList:{}}},onLoad:function(t){this.activityTeamList=getApp().globalData.activityTeamList,this.activeData=getApp().globalData.activeData,this.buyType=t.type?t.type:2},methods:{gotomapLocation:function(){var t=this;wx.chooseLocation({success:function(e){t.address=e.address,console.log(e)}})},bindPickerChange:function(t){this.sex=t.target.value},goSuccess:function(){if(""!=this.name&&""!=this.phone&&""!=this.address&&""!=this.age){var e="";1==this.buyType?e=2:2==this.buyType?e=1:3==this.buyType&&(e=3),3==this.buyType?(console.log("组队拼团"),this.joinGroup(this.activityTeamList.id)):1==this.buyType?this.sendInfo1(e,1):this.sendInfo1(e,2)}else t.showToast({title:"内容不能为空",icon:"none"})},joinGroup:function(e){var a=this;this.$api.post("/api/team/join",{activityTeamId:e,userId:t.getStorageSync("userInfo").id,activityId:this.activeData.id,address:this.address,age:this.age,name:this.name,phone:this.phone,sex:this.sex}).then((function(t){a.wxPay(3,t.data.id)}))},sendInfo1:function(e,a){var i=this;this.$api.post("/api/team/start",{userId:t.getStorageSync("userInfo").id,type:a,activityId:this.activeData.id,teamMember:{activityId:this.activeData.id,address:this.address,age:this.age,name:this.name,phone:this.phone,sex:this.sex}}).then((function(t){i.wxPay(e,t.data.id)}))},wxPay:function(e,a){var i=this;t.showLoading({title:"加载中",mask:!0}),wx.login({success:function(n){n.code?i.$api.post("/api/order/wxPay",{tableId:a,userId:t.getStorageSync("userInfo").id,payType:1,prayer_id:t.getStorageSync("paryData").id,orderType:e}).then((function(e){var a=e.data;wx.requestPayment({appId:a.appid,timeStamp:a.timestamp,nonceStr:a.noncestr,package:a.package,signType:"MD5",paySign:a.sign,success:function(e){t.showToast({title:"支付成功",duration:900}),setTimeout((function(){t.redirectTo({url:"/pages/successful/successful"})}),1500)},fail:function(e){console.log(e),console.log("支付失败"),t.showToast({title:"支付失败",icon:"none",duration:1200})},complete:function(e){t.hideLoading()}})})):console.log("登录失败！"+n.errMsg)}})}}};e.default=n}).call(this,a("543d")["default"])},"395b":function(t,e,a){},"417a":function(t,e,a){"use strict";(function(t){a("1f75");i(a("66fd"));var e=i(a("5c55"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("543d")["createPage"])},"5c55":function(t,e,a){"use strict";a.r(e);var i=a("d648"),n=a("63c1");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("faa6");var o,c=a("f0c5"),u=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=u.exports},"63c1":function(t,e,a){"use strict";a.r(e);var i=a("3843"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},d648:function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},s=[];a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}))},faa6:function(t,e,a){"use strict";var i=a("395b"),n=a.n(i);n.a}},[["417a","common/runtime","common/vendor"]]]);