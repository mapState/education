(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/learningList/learningList"],{"02d0":function(t,e,o){},"285d":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){Promise.all([o.e("common/vendor"),o.e("components/uni-popup/uni-popup")]).then(function(){return resolve(o("5592"))}.bind(null,o)).catch(o.oe)},s={components:{uniPopup:n},data:function(){return{imgUrl:"",tmpImg:"",width:570,height:820,pixelRatio:2,codePath:"/static/tmp/code.jpg",poserImg:"https://t8.baidu.com/it/u=3887179165,3572970878&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1596352536&t=2736120db00abcf307212a6d5ddfce18",top:24,showAd:!0,tagList:[],detail:{},books:[],showMask:!1}},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"自定义分享标题",path:"/pages/index/index"}},onLoad:function(e){var o=this;this.imgUrl=this.$baseUrl,this.top=t.getMenuButtonBoundingClientRect().top,this.detail=getApp().globalData.learnDetail,this.bookList(),e.tagList&&(this.tagList=JSON.parse(e.tagList)),t.getStorage({key:"notfirstStudy",success:function(t){o.showMask=!1},fail:function(t){o.showMask=!0}})},methods:{goEve:function(){t.navigateTo({url:"/pagesA/courseEvaluation/courseEvaluation"})},closeMask:function(){this.showMask=!1,t.setStorage({key:"notfirstStudy",data:"1",success:function(){console.log("success")}})},bookList:function(){var t=this;this.$api.get("/api/lesson/getBookListByLessonId",{params:{lessonId:this.detail.id,type:1}}).then((function(e){t.books=e.data}))},goBack:function(){t.navigateBack({delta:1})},lookView:function(e){t.navigateTo({url:"/pagesA/studyDetails/studyDetails?index="+e})},goStudy:function(){t.navigateTo({url:"/pagesA/studyDetails/studyDetails"})},closePoser:function(){this.$refs.poster.close()},getPoster:function(){var e=this;this.$refs.sharePop.close(),t.showLoading({title:"海报生成中...",mask:!0});var o=this,n=wx.createCanvasContext("myCanvas");n.width=this.width,n.height=this.height;n.width;wx.getImageInfo({src:this.poserImg,success:function(s){n.fillStyle="#FFFFFF",n.fillRect(0,0,e.width,e.height),n.drawImage(s.path,0,0,e.width,530),n.setFontSize(28),n.setFillStyle("#000000"),n.setTextAlign("center");var i="杭州小记者内蒙古宁夏夏令营梦幻迪士尼";i.length>20&&(i=i.substr(0,20)+"..."),n.fillText(i,e.width/2,600);var a="长按识别，立即参加";n.setFontSize(28),n.fillText(a,320,760),n.save(),n.restore();var r="邀您参加";n.setFillStyle("#666666"),n.font="normal bold 24px sans-serif",n.fillText(r,340,720),n.save(),n.restore();var c="张雨溪";n.setFillStyle("#000000"),n.font="normal bold 26px sans-serif",n.fillText(c,340,690),n.save(),n.restore(),wx.getImageInfo({src:o.codePath,success:function(s){n.drawImage(o.codePath,33,650,132,132),wx.getImageInfo({src:e.poserImg,success:function(o){console.log(o);var s=62,i=62,a=200,r=660;n.beginPath(),n.arc(s/2+a,i/2+r,s/2,0,2*Math.PI,!1),n.clip(),n.drawImage(o.path,200,660,62,62),n.save(),n.draw(),setTimeout((function(){wx.canvasToTempFilePath({canvasId:"myCanvas",x:0,y:0,width:e.width,height:e.height,destWidth:e.width,destHeight:e.height,success:function(o){var n=o.tempFilePath;e.tmpImg=n,console.log(n),t.hideLoading(),e.$refs.poster.open()},fail:function(e){console.log(e),t.hideLoading()}})}),300)}})}})}})},saveImageToPhotosAlbum:function(){var t=this,e=t.tmpImg;void 0!=e&&""!=e&&wx.saveImageToPhotosAlbum({filePath:e,success:function(t){wx.showToast({title:"已保存到相册",icon:"none",duration:1500,mask:!0})},fail:function(t){console.error(t),console.error("打开设置窗口"),wx.openSetting({success:function(t){console.error(t),t.authSetting["scope.writePhotosAlbum"]?console.error("获取权限成功，再次点击图片保存到相册"):console.error("获取权限失败")}})}})}}};e.default=s}).call(this,o("543d")["default"])},4362:function(t,e,o){"use strict";(function(t){o("1f75");n(o("66fd"));var e=n(o("e863"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"4db7":function(t,e,o){"use strict";var n={uniPopup:function(){return Promise.all([o.e("common/vendor"),o.e("components/uni-popup/uni-popup")]).then(o.bind(null,"5592"))}},s=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return t.$refs.sharePop.open()},t.e1=function(e){t.showAd=!1})},i=[];o.d(e,"b",(function(){return s})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return n}))},9836:function(t,e,o){"use strict";var n=o("02d0"),s=o.n(n);s.a},e863:function(t,e,o){"use strict";o.r(e);var n=o("4db7"),s=o("f3cd");for(var i in s)"default"!==i&&function(t){o.d(e,t,(function(){return s[t]}))}(i);o("9836");var a,r=o("f0c5"),c=Object(r["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},f3cd:function(t,e,o){"use strict";o.r(e);var n=o("285d"),s=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,(function(){return n[t]}))}(i);e["default"]=s.a}},[["4362","common/runtime","common/vendor"]]]);